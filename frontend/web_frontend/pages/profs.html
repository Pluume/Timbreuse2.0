<html>

<head>
    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">
    <link href="../dist/css/style.css" rel="stylesheet">
    <link href="../dist/css/bootstrap-table.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="../vendor/morrisjs/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <script src="../dist/js/pages.js"></script>
</head>

<body>
    <div class="container" id="pageContainer" style="width: 100%;height:100px;margin: 0;margin-right: 10px;">
        <table id="stdTable" style="width: 100%;height:100%;" data-toggle="table" data-height="800" data-click-to-select="false" data-sort-name="name" data-pagination="true" data-sort-order="desc">
            <thead>
                <tr>
                    <th data-field="state" data-checkbox="true"></th>
                    <th data-field="id" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">Student ID</th>
                    <th data-field="lname" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">Last name</th>
                    <th data-field="fname" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">First name</th>
                    <th data-field="timeDiffToday" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">Time done today</th>
                    <th data-field="timeDiff" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">Time delta</th>
                    <th data-field="status" style="text-align: center; vertical-align: middle; width: 36px; " data-formatter="statusFormatter" data-sortable="true">Status</th>
                    <th data-field="lastTagTime" style="text-align: center; vertical-align: middle; width: 36px; " data-sortable="true">Last tag time</th>
                    <th data-field="actions" style="display: inline-block" data-sortable="false" data-formatter="studentsListFormatter"><span data-toggle='modal' data-target="#addStudentModal"><button data-toggle="tooltip" data-placement='right' title='Add' href='#' onclick='gotoAddStudent();' class='btn btn-success btn-circle'><i class='fa fa-plus'></i></button></span></th>
                </tr>
            </thead>
        </table>
    </div>

    <!-- jQuery -->
    <script>
        window.$ = window.jQuery = require('../vendor/jquery/jquery.min.js');
        window.ERROR = require('../../../request.js').ERROR;
        window.PAGES = require('../../../request.js').PAGES;
        window.SCOPE = require('../../../request.js').SCOPE;
        window.RANK = require('../../../db/db.js').RANK;
        setPage(window.PAGES.PROFS);

        function studentsListFormatter(val, row) {
            return "<button data-toggle='tooltip' data-placement='left' title='Details' href='#' onclick='gotoDetailStudent(" + row.id +
                ");' class='btn btn-info btn-circle'><i class='fa fa-check'></i></button><button data-toggle='tooltip' data-placement='top' title='Edit' href='#' onclick=''gotoEditStudent(" + row.id +
                ");' class='btn btn-warning btn-circle'><i class='fa fa-plus'></i></button><button data-toggle='tooltip' data-placement='top' title='Delete' href='#' onclick='gotoDeleteStudent(" + row.id +
                ");' class='btn btn-danger btn-circle'><i class='fa fa-bomb'></i></button>";
        }

        function statusFormatter(val, row) {
            return val;
        }
        $(document).ready(function() {
            $("body").tooltip({
                selector: '[data-toggle=tooltip]'
            });
            getStudents("stdTable", () => {
                getClass((tclass) => {
                    if (tclass == null || tclass == undefined) {
                        document.getElementById("tclass").setAttribute("placeholder", "error");
                    } else {
                        document.getElementById("tclass").setAttribute("placeholder", tclass.name);
                        window.currentClass = tclass;
                    }

                });
            });
        });
    </script>
    <div class="modal fade" id="addStudentModal" tabindex="-1" role="dialog" aria-labelledby="addStudentModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addStudentModalTitle">Create a new student</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="tclass" class="form-control-label">Class : </label>
                            <input type="text" class="form-control" readonly id="tclass">
                        </div>
                        <div class="form-group">
                            <label for="fname" class="form-control-label">First name :</label>
                            <input type="text" class="form-control" id="fname">
                        </div>
                        <div class="form-group">
                            <label for="lname" class="form-control-label">Last name:</label>
                            <input type="text" class="form-control" id="lname">
                        </div>
                        <div class="form-group">
                            <label for="username" class="form-control-label">Username :</label>
                            <input type="text" class="form-control" id="username">
                        </div>
                        <div class="form-group">
                            <label for="dob" class="form-control-label">Date of birth:</label>
                            <input type="text" class="form-control" id="dob">
                        </div>
                        <div class="form-group">
                            <label for="email" class="form-control-label">Email :</label>
                            <input type="text" class="form-control" id="email">
                        </div>
                        <div class="form-group">
                            <label for="tag" class="form-control-label">Tag :</label>
                            <input type="text" class="form-control" id="tag">
                        </div>
                        <div class="form-group">
                            <label for="project" class="form-control-label">Project :</label>
                            <input type="text" class="form-control" id="project">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" data-dismiss="modal" onclick="createStudent(document.getElementById('fname').value, document.getElementById('lname').value, document.getElementById('username').value, document.getElementById('email').value,document.getElementById('tag').value, document.getElementById('tclass').value, document.getElementById('dob').value, document.getElementById('project').value);" class="btn btn-primary">Create</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- Morris Charts JavaScript -->
    <script src="../vendor/raphael/raphael.min.js"></script>
    <script src="../vendor/morrisjs/morris.min.js"></script>
    <script src="../data/morris-data.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>
    <script src="../dist/js/bootstrap-table.js"></script>
    <script src="../dist/js/getInfos.js"></script>
    <script src="../dist/js/redirect.js"></script>

    <script>
    </script>
</body>

</html>
